<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VInky Jump</title>
    <style>
        body {
            background-color: #DCDCDC; /* Lichtgrijs */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 2px solid #FFA500; /* Oranje */
        }
        .game-info {
            color: #000;
            text-align: center;
            max-width: 80%;
            margin-top: 10px;
        }
        .pause-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #FFA500;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
    <button class="pause-button" onclick="togglePause()">Pauze</button>
    <div class="game-info">
        <h2>VInky Jump</h2>
        <p>Spring met Vinky van dak naar dak! Beweeg met pijltjestoetsen of tik (links/rechts). Grijp een ladder voor een turbo-sprong, en repareer lekkende daken (met druppel) voor bonuspunten. Hoe hoger, hoe stoerder!</p>
    </div>
    <script>
        // Variabelen
        let character;
        let platforms = [];
        let gravity = 0.25;
        let jumpSpeed = -12;
        let boostJumpSpeed = -18;
        let score = 0;
        let highScore = 0;
        let gameState = 'playing'; // Start direct met spelen
        let cameraY = 0; // Camera scroll
        let isPaused = false;

        // Canvas en initiÃ«le setup
        function setup() {
            createCanvas(400, 600);
            character = {
                x: width / 2,
                y: height - 50 - 30, // Start op eerste platform
                size: 60,
                velocity: 0,
                hasBoost: false
            };
            generateInitialPlatforms();
        }

        // Hoofdgame-loop
        function draw() {
            drawBackground();
            if (gameState === 'playing' && !isPaused) {
                updateCharacter();
                updatePlatforms();
                checkCollisions();
                updateCamera();
                drawPlatforms();
                drawCharacter();
                drawScore();
            } else if (gameState === 'gameOver') {
                drawGameOverScreen();
            }
        }

        // Achtergrond tekenen
        function drawBackground() {
            background(135, 206, 235); // Blauwe lucht
            // Zonnetje
            fill(255, 215, 0);
            ellipse(50, 50, 50, 50);
            // Wolkjes
            fill(255);
            noStroke();
            ellipse(100, 100, 60, 40);
            ellipse(130, 90, 70, 50);
            ellipse(300, 150, 80, 50);
            ellipse(270, 140, 60, 40);
        }

        // Karakter bijwerken
        function updateCharacter() {
            character.velocity += gravity;
            character.y += character.velocity;

            if (character.y - cameraY > height) {
                gameState = 'gameOver';
                if (score > highScore) highScore = score;
            }

            // Beweging met pijltjestoetsen of touch
            if (keyIsDown(LEFT_ARROW) || (touches.length > 0 && touches[0].x < width / 2)) {
                character.x -= 5;
            }
            if (keyIsDown(RIGHT_ARROW) || (touches.length > 0 && touches[0].x >= width / 2)) {
                character.x += 5;
            }

            // Schermranden omkeren
            if (character.x < 0) character.x = width;
            else if (character.x > width) character.x = 0;
        }

        // Platforms bijwerken
        function updatePlatforms() {
            let speed = min(1.5 + score / 1000, 3); // Snelheid stijgt met score
            for (let platform of platforms) platform.y += speed;
            platforms = platforms.filter(p => p.y - cameraY < height);
            while (platforms.length < 6) generatePlatform();
            score += 0.1; // Langzame scoretoename
        }

        // Camera bijwerken
        function updateCamera() {
            if (character.y - cameraY < 200) {
                cameraY -= (200 - (character.y - cameraY)) * 0.1;
            }
        }

        // Botsingen controleren
        function checkCollisions() {
            for (let platform of platforms) {
                // Botsing met platform
                if (
                    character.x > platform.x &&
                    character.x < platform.x + platform.width &&
                    character.y + character.size / 2 > platform.y &&
                    character.y + character.size / 2 < platform.y + platform.height &&
                    character.velocity > 0
                ) {
                    character.velocity = character.hasBoost ? boostJumpSpeed : jumpSpeed;
                    character.hasBoost = false;
                    score += platform.isBroken ? 50 : 10; // Extra punten voor kapot dak
                    if (platform.isBroken) platform.isBroken = false; // Dak gerepareerd
                }
                // Botsing met ladder (power-up)
                if (
                    platform.hasPowerUp &&
                    character.x + character.size / 2 > platform.x + platform.width / 2 - 10 &&
                    character.x - character.size / 2 < platform.x + platform.width / 2 + 10 &&
                    character.y + character.size / 2 > platform.y - 40 &&
                    character.y - character.size / 2 < platform.y
                ) {
                    character.hasBoost = true;
                    platform.hasPowerUp = false;
                }
            }
        }

        // Karakter tekenen (oranje "V" met ogen en armen)
        function drawCharacter() {
            push();
            translate(character.x, character.y - cameraY);
            scale(0.7);

            // Oranje "V"
            fill(255, 165, 0);
            textSize(80);
            textStyle(BOLD);
            textAlign(CENTER, CENTER);
            text('V', 0, -10);

            // Witte ogen met zwarte pupillen
            fill(255);
            ellipse(-15, -20, 20, 20);
            ellipse(15, -20, 20, 20);
            fill(0);
            ellipse(-15, -20, 8, 8);
            ellipse(15, -20, 8, 8);

            // Zwevende Mickey Mouse-achtige armen
            fill(255);
            if (character.velocity < 0) { // Armen zwaaien bij springen
                arc(-40, 0, 40, 40, PI / 4, PI, CHORD);
                arc(40, 0, 40, 40, 0, 3 * PI / 4, CHORD);
            } else {
                ellipse(-40, 0, 20, 20);
                ellipse(40, 0, 20, 20);
            }

            pop();

            // Blauwe gloed bij boost
            if (character.hasBoost) {
                fill(0, 0, 255, 100);
                ellipse(character.x, character.y - cameraY, character.size + 10, character.size + 10);
            }
        }

        // Platforms tekenen (bruine hellende daken)
        function drawPlatforms() {
            for (let platform of platforms) {
                push();
                translate(0, -cameraY);
                if (platform.isBroken) {
                    // Kapot dak met waterdruppel
                    fill(139, 69, 19); // Bruin
                    noStroke();
                    beginShape();
                    vertex(platform.x, platform.y + platform.height);
                    vertex(platform.x + platform.width / 4, platform.y + platform.height / 2);
                    vertex(platform.x + platform.width / 2, platform.y + platform.height);
                    vertex(platform.x + 3 * platform.width / 4, platform.y + platform.height / 2);
                    vertex(platform.x + platform.width, platform.y + platform.height);
                    endShape(CLOSE);
                    fill(0, 191, 255); // Waterdruppel
                    ellipse(platform.x + platform.width / 2, platform.y + platform.height + 10, 10, 15);
                } else {
                    // Normaal dak
                    fill(139, 69, 19); // Bruin
                    noStroke();
                    beginShape();
                    vertex(platform.x, platform.y + platform.height);
                    vertex(platform.x + platform.width / 2, platform.y);
                    vertex(platform.x + platform.width, platform.y + platform.height);
                    endShape(CLOSE);
                }

                // Ladder (power-up)
                if (platform.hasPowerUp) {
                    drawPowerUp(platform.x + platform.width / 2, platform.y - 20);
                }
                pop();
            }
        }

        // Power-up tekenen (grijze ladder)
        function drawPowerUp(x, y) {
            push();
            translate(x, y);
            fill(169, 169, 169); // Grijs
            rect(-10, -40, 5, 40); // Linker stijl
            rect(5, -40, 5, 40); // Rechter stijl
            for (let i = 0; i < 4; i++) {
                rect(-8, -35 + i * 10, 16, 3); // Horizontale treden
            }
            pop();
        }

        // Score tekenen
        function drawScore() {
            fill(0);
            textSize(18);
            textAlign(LEFT);
            text('Score: ' + floor(score), 10, 30);
            textAlign(RIGHT);
            text('Highscore: ' + floor(highScore), width - 10, 30);
        }

        // Game-over-scherm
        function drawGameOverScreen() {
            textAlign(CENTER);
            fill(0);
            textSize(32);
            text('Spel Afgelopen', width / 2, height / 2 - 50);
            textSize(24);
            text('Score: ' + floor(score), width / 2, height / 2);
            textSize(18);
            text('Klik of tik om te herstarten', width / 2, height / 2 + 50);
        }

        // Platforms genereren
        function generateInitialPlatforms() {
            platforms = [];
            let startY = height - 50;
            platforms.push({
                x: width / 2 - 50,
                y: startY,
                width: 100,
                height: 15,
                hasPowerUp: false,
                isBroken: false // Geen kapot dak bij start
            });
            for (let i = 1; i < 6; i++) {
                let y = startY - i * (120 + score / 100) + random(-30, 30); // Grotere afstand bij hogere score
                platforms.push({
                    x: random(width - 100),
                    y: y,
                    width: 100,
                    height: 15,
                    hasPowerUp: random() < 0.1, // 10% kans
                    isBroken: random() < 0.1 // 10% kans op kapot dak
                });
            }
            character.y = startY - character.size / 2;
        }

        function generatePlatform() {
            let highestPlatform = min(platforms.map(p => p.y));
            let y = highestPlatform - (120 + score / 100) + random(-30, 30); // Grotere afstand bij hogere score
            platforms.push({
                x: random(width - 100),
                y: y,
                width: 100,
                height: 15,
                hasPowerUp: random() < 0.1, // 10% kans
                isBroken: random() < 0.1 // 10% kans op kapot dak
            });
        }

        // Bediening
        function mousePressed() {
            if (gameState === 'gameOver') resetGame();
        }

        function touchStarted() {
            if (gameState === 'gameOver') resetGame();
            return false;
        }

        // Pauze functie
        function togglePause() {
            isPaused = !isPaused;
            document.querySelector('.pause-button').textContent = isPaused ? 'Hervat' : 'Pauze';
        }

        // Reset game
        function resetGame() {
            gameState = 'playing';
            score = 0;
            character.y = height - 50 - character.size / 2;
            character.velocity = 0;
            character.hasBoost = false;
            cameraY = 0;
            generateInitialPlatforms();
            isPaused = false;
            document.querySelector('.pause-button').textContent = 'Pauze';
        }
    </script>
</body>
</html>
