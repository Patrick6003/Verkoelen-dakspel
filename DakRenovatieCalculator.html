<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DakVormCalculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .input-section, .schets-section {
            flex: 1;
            min-width: 300px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #resultaat {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
        }
        .vorm-specifiek {
            display: none;
        }
        canvas {
            border: 1px solid #ccc;
            margin-top: 10px;
            width: 100%;
            max-width: 400px;
            height: 400px;
        }
        .detail-input {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>DakVormCalculator</h1>
    <div class="container">
        <div class="input-section">
            <form id="dakForm">
                <label for="vorm">Dakvorm:</label>
                <select id="vorm" onchange="updateAlles()">
                    <option value="rechthoek">â¬œ Rechthoek</option>
                    <option value="l-vorm">ðŸ¡’ L-vorm</option>
                </select>

                <!-- Rechthoek -->
                <div id="rechthoek" class="vorm-specifiek">
                    <label for="lengte">Lengte (m):</label>
                    <input type="number" id="lengte" step="0.1" min="0" value="10" oninput="updateAlles()">
                    <label for="breedte">Breedte (m):</label>
                    <input type="number" id="breedte" step="0.1" min="0" value="5" oninput="updateAlles()">
                    <label>Detailomschrijvingen (4 zijden):</label>
                    <div class="detail-input"><input type="text" id="oms1" placeholder="Omschrijving zijde 1" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="oms2" placeholder="Omschrijving zijde 2" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="oms3" placeholder="Omschrijving zijde 3" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="oms4" placeholder="Omschrijving zijde 4" oninput="updateAlles()"></div>
                </div>

                <!-- L-vorm -->
                <div id="l-vorm" class="vorm-specifiek">
                    <label for="lengte1">Lengte deel 1 (m):</label>
                    <input type="number" id="lengte1" step="0.1" min="0" value="10" oninput="updateAlles()">
                    <label for="breedte1">Breedte deel 1 (m):</label>
                    <input type="number" id="breedte1" step="0.1" min="0" value="5" oninput="updateAlles()">
                    <label for="lengte2">Lengte deel 2 (m):</label>
                    <input type="number" id="lengte2" step="0.1" min="0" value="4" oninput="updateAlles()">
                    <label for="breedte2">Breedte deel 2 (m):</label>
                    <input type="number" id="breedte2" step="0.1" min="0" value="3" oninput="updateAlles()">
                    <label>Detailomschrijvingen (6 zijden):</label>
                    <div class="detail-input"><input type="text" id="l-oms1" placeholder="Omschrijving zijde 1" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="l-oms2" placeholder="Omschrijving zijde 2" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="l-oms3" placeholder="Omschrijving zijde 3" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="l-oms4" placeholder="Omschrijving zijde 4" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="l-oms5" placeholder="Omschrijving zijde 5" oninput="updateAlles()"></div>
                    <div class="detail-input"><input type="text" id="l-oms6" placeholder="Omschrijving zijde 6" oninput="updateAlles()"></div>
                </div>

                <label for="hellingsgraad">Hellingsgraad (Â°):</label>
                <input type="number" id="hellingsgraad" step="0.1" min="0" max="90" value="0" oninput="updateAlles()">
                <button type="button" onclick="resetForm()">Reset</button>
            </form>
            <div id="resultaat"></div>
        </div>
        <div class="schets-section">
            <h3>Schets</h3>
            <canvas id="dakCanvas"></canvas>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('dakCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 400;
        canvas.height = 400;

        function updateAlles() {
            const vorm = document.getElementById('vorm').value;
            const hellingsgraad = parseFloat(document.getElementById('hellingsgraad').value) || 0;
            let oppervlakte = 0, omtrek = 0, lengtes = [], omschrijvingen = [];

            // Toon juiste velden
            document.getElementById('rechthoek').style.display = vorm === 'rechthoek' ? 'block' : 'none';
            document.getElementById('l-vorm').style.display = vorm === 'l-vorm' ? 'block' : 'none';

            if (vorm === 'rechthoek') {
                const lengte = parseFloat(document.getElementById('lengte').value) || 0;
                const breedte = parseFloat(document.getElementById('breedte').value) || 0;
                oppervlakte = lengte * breedte;
                omtrek = 2 * (lengte + breedte);
                lengtes = [lengte, breedte, lengte, breedte];
                omschrijvingen = [1, 2, 3, 4].map(i => document.getElementById(`oms${i}`).value || `Zijde ${i}`);
                tekenRechthoek(lengte, breedte);
            } else if (vorm === 'l-vorm') {
                const lengte1 = parseFloat(document.getElementById('lengte1').value) || 0;
                const breedte1 = parseFloat(document.getElementById('breedte1').value) || 0;
                const lengte2 = parseFloat(document.getElementById('lengte2').value) || 0;
                const breedte2 = parseFloat(document.getElementById('breedte2').value) || 0;
                oppervlakte = (lengte1 * breedte1) + (lengte2 * breedte2);
                omtrek = lengte1 + breedte1 + lengte2 + (breedte1 + breedte2) + (lengte1 - lengte2) + breedte2;
                lengtes = [lengte1, breedte1, lengte2, breedte1 + breedte2, lengte1 - lengte2, breedte2];
                omschrijvingen = [1, 2, 3, 4, 5, 6].map(i => document.getElementById(`l-oms${i}`).value || `Zijde ${i}`);
                tekenLVorm(lengte1, breedte1, lengte2, breedte2);
            }

            // Hellingsgraadcorrectie
            if (hellingsgraad > 0) {
                const cosinus = Math.cos(hellingsgraad * Math.PI / 180);
                oppervlakte = oppervlakte / cosinus;
            }

            // Detailomschrijvingen sommen
            const details = somDetailnummers(lengtes, omschrijvingen);

            // Resultaat tonen
            const resultaatDiv = document.getElementById('resultaat');
            let detailText = '<h4>Details:</h4><ul>';
            for (const [oms, lengte] of Object.entries(details)) {
                detailText += `<li>${oms}: ${lengte.toFixed(2)} m</li>`;
            }
            detailText += '</ul>';
            resultaatDiv.innerHTML = `
                <h3>Resultaat</h3>
                <p>Oppervlakte: ${oppervlakte.toFixed(2)} mÂ²</p>
                <p>Totale omtrek: ${omtrek.toFixed(2)} m</p>
                ${detailText}
            `;
        }

        function somDetailnummers(lengtes, omschrijvingen) {
            const details = {};
            lengtes.forEach((lengte, index) => {
                const oms = omschrijvingen[index];
                details[oms] = (details[oms] || 0) + lengte;
            });
            return details;
        }

        function tekenRechthoek(lengte, breedte) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const schaal = Math.min(350 / lengte, 350 / breedte) || 1;
            const x = (canvas.width - lengte * schaal) / 2;
            const y = (canvas.height - breedte * schaal) / 2;
            ctx.beginPath();
            ctx.rect(x, y, lengte * schaal, breedte * schaal);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            ctx.stroke();
            tekenNummers([
                [x, y, x + lengte * schaal, y], // Boven
                [x + lengte * schaal, y, x + lengte * schaal, y + breedte * schaal], // Rechts
                [x + lengte * schaal, y + breedte * schaal, x, y + breedte * schaal], // Onder
                [x, y + breedte * schaal, x, y] // Links
            ], 4);
        }

        function tekenLVorm(lengte1, breedte1, lengte2, breedte2) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const schaal = Math.min(350 / lengte1, 350 / (breedte1 + breedte2)) || 1;
            const x = (canvas.width - lengte1 * schaal) / 2;
            const y = (canvas.height - (breedte1 + breedte2) * schaal) / 2;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x + lengte1 * schaal, y);
            ctx.lineTo(x + lengte1 * schaal, y + breedte1 * schaal);
            ctx.lineTo(x + (lengte1 - lengte2) * schaal, y + breedte1 * schaal);
            ctx.lineTo(x + (lengte1 - lengte2) * schaal, y + (breedte1 + breedte2) * schaal);
            ctx.lineTo(x, y + (breedte1 + breedte2) * schaal);
            ctx.closePath();
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            ctx.stroke();
            tekenNummers([
                [x, y, x + lengte1 * schaal, y],
                [x + lengte1 * schaal, y, x + lengte1 * schaal, y + breedte1 * schaal],
                [x + lengte1 * schaal, y + breedte1 * schaal, x + (lengte1 - lengte2) * schaal, y + breedte1 * schaal],
                [x + (lengte1 - lengte2) * schaal, y + breedte1 * schaal, x + (lengte1 - lengte2) * schaal, y + (breedte1 + breedte2) * schaal],
                [x + (lengte1 - lengte2) * schaal, y + (breedte1 + breedte2) * schaal, x, y + (breedte1 + breedte2) * schaal],
                [x, y + (breedte1 + breedte2) * schaal, x, y]
            ], 6);
        }

        function tekenNummers(lijnen, aantal) {
            ctx.font = '14px Arial';
            ctx.fillStyle = 'red';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            lijnen.slice(0, aantal).forEach((lijn, i) => {
                const middenX = (lijn[0] + lijn[2]) / 2;
                const middenY = (lijn[1] + lijn[3]) / 2;
                ctx.fillText(i + 1, middenX, middenY);
            });
        }

        function resetForm() {
            document.getElementById('dakForm').reset();
            document.getElementById('lengte').value = 10;
            document.getElementById('breedte').value = 5;
            document.getElementById('lengte1').value = 10;
            document.getElementById('breedte1').value = 5;
            document.getElementById('lengte2').value = 4;
            document.getElementById('breedte2').value = 3;
            document.getElementById('hellingsgraad').value = 0;
            document.getElementById('resultaat').innerHTML = '';
            updateAlles();
        }

        // Initiele weergave
        updateAlles();
    </script>
</body>
</html>
