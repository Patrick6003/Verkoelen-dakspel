<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VInky Jump</title>
    <style>
        body {
            background-color: #DCDCDC; /* Lichtgrijs */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 2px solid #FFA500; /* Oranje */
        }
        .game-info {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #000;
            text-align: center;
            max-width: 80%;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
    <div class="game-info">
        <h2>Welkom bij VInky Jump!</h2>
        <p>Spring van dak naar dak als Vinky de dakspecialist! Gebruik de pijltjestoetsen om te bewegen, spatiebalk om te springen, of tik op het scherm op mobiel. Verzamel de dakdekkersbrander voor een jetpack-boost. Veel plezier!</p>
    </div>
    <script>
        // Variabelen
        let character;
        let platforms = [];
        let powerUps = [];
        let gravity = 0.33;
        let jumpSpeed = -10;
        let boostJumpSpeed = -15;
        let score = 0;
        let highScore = 0;
        let gameState = 'start'; // 'start', 'playing', 'gameOver'
        let characterImg;
        let platformImg;
        let torchImg;

        // Afbeeldingen laden
        function preload() {
            characterImg = loadImage('character.png');
            platformImg = loadImage('platform.png');
            torchImg = loadImage('torch.png');
        }

        // Canvas en initiÃ«le setup
        function setup() {
            createCanvas(400, 600);
            character = {
                x: width / 2,
                y: height - 100,
                size: 60,
                velocity: 0,
                hasBoost: false
            };
            generateInitialPlatforms();
        }

        // Hoofdgame-loop
        function draw() {
            background(220, 220, 220); // Lichtgrijs
            if (gameState === 'start') {
                drawStartScreen();
            } else if (gameState === 'playing') {
                updateCharacter();
                updatePlatforms();
                checkCollisions();
                drawCharacter();
                drawPlatforms();
                drawScore();
            } else if (gameState === 'gameOver') {
                drawGameOverScreen();
            }
        }

        // Startscherm
        function drawStartScreen() {
            textAlign(CENTER);
            fill(0);
            textSize(32);
            text('VInky Jump', width / 2, height / 2 - 50);
            textSize(24);
            text('Klik om te starten', width / 2, height / 2);
            textSize(18);
            text('Hoogste Score: ' + highScore, width / 2, height / 2 + 50);
        }

        // Karakter bijwerken
        function updateCharacter() {
            character.velocity += gravity;
            character.y += character.velocity;

            if (character.y > height) {
                gameState = 'gameOver';
                if (score > highScore) highScore = score;
            }

            if (keyIsDown(LEFT_ARROW)) character.x -= 5;
            if (keyIsDown(RIGHT_ARROW)) character.x += 5;

            // Schermranden omkeren
            if (character.x < 0) character.x = width;
            else if (character.x > width) character.x = 0;
        }

        // Platforms bijwerken
        function updatePlatforms() {
            for (let platform of platforms) platform.y += 2;
            platforms = platforms.filter(p => p.y < height);
            while (platforms.length < 5) generatePlatform();
        }

        // Botsingen controleren
        function checkCollisions() {
            for (let platform of platforms) {
                if (
                    character.x > platform.x &&
                    character.x < platform.x + platform.width &&
                    character.y + character.size / 2 > platform.y &&
                    character.y + character.size / 2 < platform.y + platform.height &&
                    character.velocity > 0
                ) {
                    character.velocity = character.hasBoost ? boostJumpSpeed : jumpSpeed;
                    character.hasBoost = false;
                    score += 10;
                    if (platform.hasPowerUp) {
                        character.hasBoost = true;
                        platform.hasPowerUp = false;
                    }
                }
            }
        }

        // Karakter tekenen
        function drawCharacter() {
            image(characterImg, character.x - character.size / 2, character.y - character.size / 2, character.size, character.size);
        }

        // Platforms tekenen
        function drawPlatforms() {
            for (let platform of platforms) {
                image(platformImg, platform.x, platform.y, platform.width, platform.height);
                if (platform.hasPowerUp) {
                    image(torchImg, platform.x + platform.width / 2 - 10, platform.y - 20, 20, 20);
                }
            }
        }

        // Score tekenen
        function drawScore() {
            fill(0);
            textSize(18);
            textAlign(LEFT);
            text('Score: ' + score, 10, 30);
        }

        // Game-over-scherm
        function drawGameOverScreen() {
            textAlign(CENTER);
            fill(0);
            textSize(32);
            text('Spel Afgelopen', width / 2, height / 2 - 50);
            textSize(24);
            text('Score: ' + score, width / 2, height / 2);
            textSize(18);
            text('Klik om te herstarten', width / 2, height / 2 + 50);
        }

        // Platforms genereren
        function generateInitialPlatforms() {
            platforms = [];
            for (let i = 0; i < 5; i++) {
                let platform = {
                    x: random(width - 85),
                    y: height - i * 120,
                    width: 85,
                    height: 15,
                    hasPowerUp: random() < 0.2
                };
                platforms.push(platform);
            }
        }

        function generatePlatform() {
            let platform = {
                x: random(width - 85),
                y: -15,
                width: 85,
                height: 15,
                hasPowerUp: random() < 0.2
            };
            platforms.push(platform);
        }

        // Bediening
        function keyPressed() {
            if (keyCode === 32 && gameState === 'playing') {
                if (character.velocity > 0) {
                    character.velocity = character.hasBoost ? boostJumpSpeed : jumpSpeed;
                    character.hasBoost = false;
                }
            }
        }

        function mousePressed() {
            if (gameState === 'start') startGame();
            else if (gameState === 'gameOver') resetGame();
        }

        function touchStarted() {
            if (gameState === 'start') startGame();
            else if (gameState === 'gameOver') resetGame();
            return false;
        }

        // Start en reset
        function startGame() {
            gameState = 'playing';
            score = 0;
            character.y = height - 100;
            character.velocity = 0;
            generateInitialPlatforms();
        }

        function resetGame() {
            gameState = 'playing';
            score = 0;
            character.y = height - 100;
            character.velocity = 0;
            generateInitialPlatforms();
        }
    </script>
</body>
</html>
