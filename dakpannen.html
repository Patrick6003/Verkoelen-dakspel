<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vinky V Dakspel</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="600"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Variabelen
    let vinkyX = 175; // Startpositie in het midden van het dak
    const vinkyY = 530; // Vinky V op het dak (onder de randbeveiliging)
    const normalVinkyWidth = 50;
    const normalVinkyHeight = 50;
    let vinkyWidth = normalVinkyWidth;
    let vinkyHeight = normalVinkyHeight;
    let objects = [];
    let score = 0;
    let lives = 3;
    let gameOver = false;
    let powerUpActive = false;
    let powerUpTimer = 0;
    const powerUpDuration = 5000; // 5 seconden
    let craneX = 50; // Positie van de torenkraan (links)

    // Definieer objecttypes met snelheid en punten
    const objectTypes = {
      dakpan: { speed: 2, points: 10, width: 20, height: 20 },
      dakrol: { speed: 3, points: 20, width: 30, height: 30 },
      schroef: { speed: 4, points: 5, width: 10, height: 10 },
      powerup: { speed: 2, points: 0, width: 20, height: 20 }
    };

    // Besturing via touch (mobiel) of muis (desktop)
    canvas.addEventListener('touchmove', function(e) {
      e.preventDefault();
      const touch = e.touches[0];
      vinkyX = touch.clientX - canvas.offsetLeft - vinkyWidth / 2;
      // Beperk Vinky V tot het dak (tussen randbeveiliging)
      if (vinkyX < 50) vinkyX = 50; // Linksaf randbeveiliging
      if (vinkyX > canvas.width - vinkyWidth - 50) vinkyX = canvas.width - vinkyWidth - 50; // Rechtsaf randbeveiliging
    });

    canvas.addEventListener('mousemove', function(e) {
      const rect = canvas.getBoundingClientRect();
      vinkyX = e.clientX - rect.left - vinkyWidth / 2;
      // Beperk Vinky V tot het dak (tussen randbeveiliging)
      if (vinkyX < 50) vinkyX = 50;
      if (vinkyX > canvas.width - vinkyWidth - 50) vinkyX = canvas.width - vinkyWidth - 50;
    });

    // Klik voor opnieuw knop
    canvas.addEventListener('click', function(e) {
      if (gameOver) {
        const rect = canvas.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const clickY = e.clientY - rect.top;
        if (clickX > 150 && clickX < 250 && clickY > 275 && clickY < 325) {
          restartGame();
        }
      }
    });

    // Functie om een nieuw object te spawnen (vanaf de torenkraan)
    function spawnObject() {
      let type;
      if (Math.random() < 0.1) { // 10% kans op power-up
        type = 'powerup';
      } else {
        const types = ['dakpan', 'dakrol', 'schroef'];
        type = types[Math.floor(Math.random() * types.length)];
      }
      const x = craneX + 20; // Objecten vallen vanaf de kraan
      const object = {
        type: type,
        x: x,
        y: 50, // Start onder de kraan
        speed: objectTypes[type].speed,
        points: objectTypes[type].points,
        width: objectTypes[type].width,
        height: objectTypes[type].height
      };
      objects.push(object);
    }

    // Update de objecten (beweging en vangdetectie)
    function updateObjects() {
      for (let i = objects.length - 1; i >= 0; i--) {
        let obj = objects[i];
        obj.y += obj.speed;

        // Controleer of Vinky V het object vangt
        if (obj.y + obj.height > vinkyY && obj.y < vinkyY + vinkyHeight &&
            obj.x + obj.width > vinkyX && obj.x < vinkyX + vinkyWidth) {
          if (obj.type === 'powerup') {
            powerUpActive = true;
            powerUpTimer = powerUpDuration;
          } else {
            score += obj.points;
          }
          objects.splice(i, 1);
        } 
        // Controleer of het object de grond raakt
        else if (obj.y > canvas.height) {
          if (obj.type !== 'powerup') {
            lives--;
          }
          objects.splice(i, 1);
        }
      }
    }

    // Controleer of het spel voorbij is
    function checkGameOver() {
      if (lives <= 0) {
        gameOver = true;
      }
    }

    // Teken de achtergrond (plat dak en huisstijl Verkoelen)
    function drawBackground() {
      ctx.fillStyle = '#D3D3D3'; // Lichtgrijs (dak)
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      // Plat dak (grijze strook onderaan)
      ctx.fillStyle = '#808080'; // Grijs voor dak
      ctx.fillRect(0, 500, canvas.width, 100); // Dakoppervlak
      // Randbeveiliging (witte lijnen links en rechts)
      ctx.fillStyle = '#FFFFFF'; // Wit
      ctx.fillRect(0, 500, 50, 100); // Linker randbeveiliging
      ctx.fillRect(canvas.width - 50, 500, 50, 100); // Rechter randbeveiliging
    }

    // Teken Vinky V (gebaseerd op de afbeelding)
    function drawVinkyV() {
      ctx.fillStyle = '#FFA500'; // Oranje voor de V
      ctx.beginPath();
      ctx.moveTo(vinkyX, vinkyY + vinkyHeight);
      ctx.lineTo(vinkyX + vinkyWidth / 2, vinkyY);
      ctx.lineTo(vinkyX + vinkyWidth, vinkyY + vinkyHeight);
      ctx.closePath();
      ctx.fill();

      // Blauwe ogen
      ctx.fillStyle = '#0000FF'; // Blauw
      ctx.beginPath();
      ctx.arc(vinkyX + vinkyWidth / 4, vinkyY + vinkyHeight / 2, 5, 0, Math.PI * 2);
      ctx.arc(vinkyX + 3 * vinkyWidth / 4, vinkyY + vinkyHeight / 2, 5, 0, Math.PI * 2);
      ctx.fill();

      // Glimlach
      ctx.fillStyle = '#FF0000'; // Rood
      ctx.beginPath();
      ctx.arc(vinkyX + vinkyWidth / 2, vinkyY + vinkyHeight / 2 + 5, 5, 0, Math.PI, true);
      ctx.fill();

      // Witte handschoenen (vereenvoudigd als rechthoeken)
      ctx.fillStyle = '#FFFFFF'; // Wit
      ctx.fillRect(vinkyX - 20, vinkyY + vinkyHeight / 2 - 10, 20, 20); // Linker hand
      ctx.fillRect(vinkyX + vinkyWidth, vinkyY + vinkyHeight / 2 - 10, 20, 20); // Rechter hand
    }

    // Teken de vallende objecten
    function drawObjects() {
      for (let obj of objects) {
        if (obj.type === 'dakpan') {
          ctx.fillStyle = '#8B4513'; // Bruin
          ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
        } else if (obj.type === 'dakrol') {
          ctx.fillStyle = '#000000'; // Zwart
          ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
          ctx.fillStyle = '#FFFFFF'; // Wit
          ctx.fillRect(obj.x, obj.y + obj.height / 2 - 2, obj.width, 4); // Witte strook
        } else if (obj.type === 'schroef') {
          ctx.fillStyle = '#4682B4'; // Blauw-grijs
          ctx.beginPath();
          ctx.arc(obj.x + obj.width / 2, obj.y + obj.height / 2, obj.width / 2, 0, Math.PI * 2);
          ctx.fill();
        } else if (obj.type === 'powerup') {
          ctx.fillStyle = '#FFD700'; // Goud
          // Teken een eenvoudige ster
          ctx.beginPath();
          ctx.moveTo(obj.x + obj.width / 2, obj.y);
          ctx.lineTo(obj.x + obj.width, obj.y + obj.height);
          ctx.lineTo(obj.x, obj.y + obj.height / 3);
          ctx.lineTo(obj.x + obj.width, obj.y + obj.height / 3);
          ctx.lineTo(obj.x, obj.y + obj.height);
          ctx.closePath();
          ctx.fill();
        }
      }
    }

    // Teken de torenkraan
    function drawCrane() {
      ctx.fillStyle = '#FFFF00'; // Geel
      ctx.fillRect(craneX, 10, 50, 40); // Basis van de kraan
      ctx.fillStyle = '#000000'; // Zwart voor details
      ctx.fillRect(craneX + 20, 10, 10, 50); // Arm van de kraan
      // Simuleer beweging (schommelen tussen links en rechts)
      craneX += Math.sin(Date.now() / 500) * 2; // Langzame schommeling
      if (craneX < 0) craneX = 0;
      if (craneX > canvas.width - 50) craneX = canvas.width - 50;
    }

    // Teken de score
    function drawScore() {
      ctx.font = '20px Arial';
      ctx.fillStyle = '#FFFFFF'; // Wit voor tekst
      ctx.fillText('Score: ' + score, 10, 30);
    }

    // Teken de levens
    function drawLives() {
      ctx.fillText('Levens: ' + lives, 10, 60);
    }

    // Teken de power-up status
    function drawPowerUpStatus() {
      if (powerUpActive) {
        ctx.fillText('Power-Up Active!', 10, 90);
      }
    }

    // Teken de opnieuw knop
    function drawRestartButton() {
      ctx.fillStyle = '#FFFFFF'; // Wit
      ctx.fillRect(150, 275, 100, 50);
      ctx.fillStyle = '#003087'; // Blauw
      ctx.font = '20px Arial';
      ctx.fillText('Opnieuw', 165, 305);
    }

    // Herstart het spel
    function restartGame() {
      score = 0;
      lives = 3;
      objects = [];
      vinkyX = 175;
      vinkyWidth = normalVinkyWidth;
      vinkyHeight = normalVinkyHeight;
      powerUpActive = false;
      powerUpTimer = 0;
      craneX = 50;
      gameOver = false;
    }

    // Game loop
    function gameLoop() {
      if (!gameOver) {
        // Spawn nieuw object met 0,5% kans per frame (minder objecten)
        if (Math.random() < 0.005) {
          spawnObject();
        }

        updateObjects();
        checkGameOver();
        drawBackground();
        drawCrane(); // Teken de torenkraan
        drawVinkyV();
        drawObjects();
        drawScore();
        drawLives();
        drawPowerUpStatus();

        // Update power-up timer
        if (powerUpActive) {
          powerUpTimer -= 16; // Aangenomen ~60fps
          if (powerUpTimer <= 0) {
            powerUpActive = false;
            vinkyWidth = normalVinkyWidth;
            vinkyHeight = normalVinkyHeight;
          } else {
            vinkyWidth = normalVinkyWidth * 1.5;
            vinkyHeight = normalVinkyHeight * 1.5;
          }
        }
      } else {
        drawRestartButton();
      }
      requestAnimationFrame(gameLoop);
    }

    // Start het spel
    gameLoop();
  </script>
</body>
</html>
