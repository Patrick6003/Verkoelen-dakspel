<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dakbedekking Berekening - Verkoelen Dakspecialisten</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #1A3C34;
            color: white;
            text-align: center;
            padding: 15px 0;
        }
        main {
            max-width: 900px;
            margin: 20px auto;
            padding: 0 20px;
        }
        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h3 {
            color: #1A3C34;
            margin-top: 0;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input, select {
            width: calc(50% - 10px);
            padding: 8px;
            margin: 5px 5px;
            border: 1px solid #1A3C34;
            border-radius: 3px;
            box-sizing: border-box;
        }
        button {
            background-color: #1A3C34;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            margin-top: 15px;
        }
        button:hover {
            background-color: #2E5E54;
        }
        #resultaat {
            margin: 20px 0;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        #schets {
            border: 2px solid #1A3C34;
            max-width: 100%;
            background-color: #fff;
            margin-top: 20px;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #1A3C34;
            color: white;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        @media (max-width: 600px) {
            input, select {
                width: 100%;
                margin: 5px 0;
            }
            #schets {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Verkoelen Dakspecialisten - Dakberekening</h1>
    </header>
    <main>
        <form id="dakForm">
            <h3>Invoer Dakgegevens</h3>
            <label>Baanafmetingen (m):</label><br>
            <input type="number" id="baanLengte" placeholder="Lengte" step="0.01" required>
            <input type="number" id="baanBreedte" placeholder="Breedte" step="0.01" required><br>
            <label>Overlap (m):</label><br>
            <input type="number" id="kopOverlap" placeholder="Kop" step="0.01" required>
            <input type="number" id="langsOverlap" placeholder="Langs" step="0.01" required><br>
            <label>Dakvlak (m):</label><br>
            <input type="number" id="dakLengte" placeholder="Lengte" step="0.01" required>
            <input type="number" id="dakBreedte" placeholder="Breedte" step="0.01" required><br>
            <label>Verband:</label>
            <select id="verband">
                <option value="halfsteens">Halfsteensverband</option>
                <option value="blok">Blokverband</option>
            </select><br>
            <button type="submit">Bereken</button>
        </form>
        <div id="resultaat"></div>
        <canvas id="schets" width="400" height="300"></canvas>
    </main>
    <footer>
        <p>© 2025 Verkoelen Dakspecialisten Weert</p>
    </footer>
    <script>
        document.getElementById('dakForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Invoer ophalen
            const baanLengte = parseFloat(document.getElementById('baanLengte').value);
            const baanBreedte = parseFloat(document.getElementById('baanBreedte').value);
            const kopOverlap = parseFloat(document.getElementById('kopOverlap').value);
            const langsOverlap = parseFloat(document.getElementById('langsOverlap').value);
            const dakLengte = parseFloat(document.getElementById('dakLengte').value);
            const dakBreedte = parseFloat(document.getElementById('dakBreedte').value);
            const verband = document.getElementById('verband').value;

            // Bereken effectieve afmetingen
            const effectieveBaanLengte = baanLengte - kopOverlap;
            const effectieveBaanBreedte = baanBreedte - langsOverlap;
            const nettoDakOppervlakte = dakLengte * dakBreedte;

            let aantalBanenLengte, aantalBanenBreedte, materiaalOppervlakte, snijverlies;

            if (verband === 'halfsteens') {
                aantalBanenLengte = Math.ceil(dakLengte / effectieveBaanLengte);
                aantalBanenBreedte = Math.ceil(dakBreedte / effectieveBaanBreedte);
                materiaalOppervlakte = aantalBanenLengte * aantalBanenBreedte * baanLengte * baanBreedte;
                snijverlies = materiaalOppervlakte - nettoDakOppervlakte;
            } else { // blokverband
                aantalBanenBreedte = Math.floor(dakBreedte / effectieveBaanBreedte);
                const restBreedte = dakBreedte - (aantalBanenBreedte * effectieveBaanBreedte);
                const sluitbaanBreedte = restBreedte + langsOverlap;
                aantalBanenLengte = Math.ceil(dakLengte / effectieveBaanLengte);
                materiaalOppervlakte = (aantalBanenBreedte * aantalBanenLengte * baanLengte * baanBreedte) +
                                    (aantalBanenLengte * sluitbaanBreedte * baanLengte);
                snijverlies = materiaalOppervlakte - nettoDakOppervlakte;
            }

            const overlapFactor = materiaalOppervlakte / nettoDakOppervlakte;

            // Resultaat weergeven
            document.getElementById('resultaat').innerHTML = `
                <strong>Resultaat:</strong><br>
                Dakoppervlakte: ${nettoDakOppervlakte.toFixed(2)} m²<br>
                Materiaaloppervlakte: ${materiaalOppervlakte.toFixed(2)} m²<br>
                Overlapfactor: ${overlapFactor.toFixed(2)}<br>
                Snijverlies: ${snijverlies.toFixed(2)} m² (valt weg)
            `;

            // Schets tekenen
            tekenSchets(dakLengte, dakBreedte, baanLengte, baanBreedte, kopOverlap, langsOverlap, verband, aantalBanenBreedte, aantalBanenLengte);
        });

        function tekenSchets(dakLengte, dakBreedte, baanLengte, baanBreedte, kopOverlap, langsOverlap, verband, aantalBanenBreedte, aantalBanenLengte) {
            const canvas = document.getElementById('schets');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Schaal berekenen
            const schaal = Math.min(380 / dakLengte, 280 / dakBreedte);
            const cDakLengte = dakLengte * schaal;
            const cDakBreedte = dakBreedte * schaal;
            const cBaanLengte = baanLengte * schaal;
            const cBaanBreedte = baanBreedte * schaal;
            const cKopOverlap = kopOverlap * schaal;
            const cLangsOverlap = langsOverlap * schaal;

            // Dakvlak tekenen
            ctx.strokeStyle = '#1A3C34';
            ctx.lineWidth = 2;
            ctx.strokeRect(10, 10, cDakLengte, cDakBreedte);

            // Banen tekenen
            ctx.fillStyle = 'rgba(26, 60, 52, 0.4)';
            const effectieveBaanLengte = cBaanLengte - cKopOverlap;
            const effectieveBaanBreedte = cBaanBreedte - cLangsOverlap;

            if (verband === 'halfsteens') {
                for (let i = 0; i < aantalBanenBreedte; i++) {
                    for (let j = 0; j < aantalBanenLengte; j++) {
                        const x = 10 + j * effectieveBaanLengte + (i % 2) * (effectieveBaanLengte / 2);
                        const y = 10 + i * effectieveBaanBreedte;
                        ctx.fillRect(x, y, cBaanLengte, cBaanBreedte);
                        ctx.strokeRect(x, y, cBaanLengte, cBaanBreedte);
                    }
                }
            } else { // blokverband
                for (let i = 0; i < aantalBanenBreedte; i++) {
                    for (let j = 0; j < aantalBanenLengte; j++) {
                        ctx.fillRect(10 + j * effectieveBaanLengte, 10 + i * effectieveBaanBreedte, cBaanLengte, cBaanBreedte);
                        ctx.strokeRect(10 + j * effectieveBaanLengte, 10 + i * effectieveBaanBreedte, cBaanLengte, cBaanBreedte);
                    }
                }
                // Sluitbaan
                const sluitbaanBreedte = (cDakBreedte - aantalBanenBreedte * effectieveBaanBreedte) + cLangsOverlap;
                for (let j = 0; j < aantalBanenLengte; j++) {
                    ctx.fillRect(10 + j * effectieveBaanLengte, 10 + aantalBanenBreedte * effectieveBaanBreedte, cBaanLengte, sluitbaanBreedte);
                    ctx.strokeRect(10 + j * effectieveBaanLengte, 10 + aantalBanenBreedte * effectieveBaanBreedte, cBaanLengte, sluitbaanBreedte);
                }
            }

            // Labels
            ctx.fillStyle = '#1A3C34';
            ctx.font = '12px Arial';
            ctx.fillText(`Dak: ${dakLengte}m x ${dakBreedte}m`, 15, 25);
        }
    </script>
</body>
</html>
