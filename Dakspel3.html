<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dak Runner - Verkoelen Dakspecialisten Weert</title>
    <style>
        body { margin: 0; overflow: hidden; background: linear-gradient(#D3D3D3, #FFFFFF); } /* Huisstijl: Licht grijs naar wit */
        canvas { display: block; margin: 0 auto; border: 1px solid #FF6600; } /* Oranje border */
        #score { position: absolute; top: 10px; left: 10px; font-family: Arial; font-size: 24px; color: #FF6600; } /* Oranje tekst */
        #game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: Arial; font-size: 32px; color: #FF6600; display: none; text-align: center; background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #D3D3D3; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="score">Score: 0</div>
    <div id="game-over">
        Game Over!<br>
        Score: <span id="final-score">0</span><br>
        Hoogste Score: <span id="high-score">0</span><br>
        Verkoelen Dakspecialisten: Bereik Nieuwe Hoogtes!<br>
        Bezoek www.verkoelen.nl voor uw dakbehoeften.<br>
        Druk op spatie of tik om te herstarten.
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 800; // Breder voor runner feel
        canvas.height = 600;

        // Huisstijl kleuren
        const ORANGE = '#FF6600';
        const LIGHT_GRAY = '#D3D3D3';
        const WHITE = '#FFFFFF';

        // Speler (dakdekker)
        let player = {
            x: 100,
            y: canvas.height - 100,
            width: 40,
            height: 60,
            velocityY: 0,
            gravity: 0.8,
            jumpForce: -18,
            isJumping: false,
            animationFrame: 0 // Voor lopende animatie
        };

        // Grond (dak)
        let groundY = canvas.height - 50;
        let groundSpeed = 5;

        // Obstakels en items
        let obstacles = [];
        let items = [];
        let obstacleSpawnRate = 100; // Frames tussen spawns
        let frameCount = 0;

        // Achtergrond (parallax)
        let bgClouds = []; // Wolken voor parallax
        for (let i = 0; i < 5; i++) {
            bgClouds.push({ x: Math.random() * canvas.width, y: Math.random() * 200 + 50, size: Math.random() * 50 + 50 });
        }

        // Score en game state
        let score = 0;
        let highScore = 0;
        let gameOver = false;
        let speed = 5; // Basis snelheid, verhoogt over tijd

        // Genereer obstakel (schoorsteen of gat)
        function generateObstacle() {
            let type = Math.random() > 0.5 ? 'chimney' : 'gap';
            let obs = {
                x: canvas.width,
                y: groundY - (type === 'chimney' ? 60 : 0),
                width: type === 'chimney' ? 40 : 80,
                height: type === 'chimney' ? 60 : 20, // Gat is laag
                type: type
            };
            obstacles.push(obs);
        }

        // Genereer item (dakpan)
        function generateItem() {
            let item = {
                x: canvas.width + Math.random() * 200,
                y: groundY - 80 - Math.random() * 50,
                size: 20,
                collected: false
            };
            items.push(item);
        }

        // Teken achtergrond met parallax
        function drawBackground() {
            // Gradient lucht
            let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, WHITE);
            gradient.addColorStop(1, LIGHT_GRAY);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Wolken (parallax: beweeg langzamer)
            bgClouds.forEach(cloud => {
                ctx.fillStyle = WHITE;
                ctx.beginPath();
                ctx.arc(cloud.x, cloud.y, cloud.size / 2, 0, Math.PI * 2);
                ctx.arc(cloud.x + cloud.size / 3, cloud.y - cloud.size / 4, cloud.size / 3, 0, Math.PI * 2);
                ctx.arc(cloud.x - cloud.size / 3, cloud.y - cloud.size / 4, cloud.size / 3, 0, Math.PI * 2);
                ctx.fill();
                cloud.x -= speed / 2; // Parallax snelheid
                if (cloud.x < -cloud.size) cloud.x = canvas.width + cloud.size;
            });
        }

        // Teken grond (dak met pannenpatroon)
        function drawGround() {
            ctx.fillStyle = LIGHT_GRAY;
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);
            // Pannenpatroon
            for (let x = 0; x < canvas.width; x += 20) {
                ctx.fillStyle = '#B0B0B0'; // Donkerder grijs voor patroon
                ctx.fillRect(x, groundY, 18, 5);
            }
        }

        // Teken speler met animatie
        function drawPlayer() {
            // Body (oranje overall)
            ctx.fillStyle = ORANGE;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            // Helm (wit)
            ctx.fillStyle = WHITE;
            ctx.fillRect(player.x + 5, player.y - 10, player.width - 10, 10);
            // Animatie: Bewegende benen/armen
            player.animationFrame += 0.2;
            let legOffset = Math.sin(player.animationFrame) * 5;
            ctx.fillStyle = ORANGE;
            ctx.fillRect(player.x + 5, player.y + player.height - 10, 10, 10 + legOffset); // Linkerbeen
            ctx.fillRect(player.x + player.width - 15, player.y + player.height - 10, 10, 10 - legOffset); // Rechterbeen
            // Shadow voor diepte
            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 5;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
        }

        // Teken obstakels
        function drawObstacles() {
            obstacles.forEach(obs => {
                if (obs.type === 'chimney') {
                    ctx.fillStyle = LIGHT_GRAY;
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                    // Schoorsteen top
                    ctx.fillStyle = '#A0A0A0';
                    ctx.fillRect(obs.x - 5, obs.y - 10, obs.width + 10, 10);
                } else { // Gap
                    ctx.fillStyle = '#333333'; // Donker gat
                    ctx.fillRect(obs.x, groundY, obs.width, obs.height);
                }
            });
        }

        // Teken items (dakpannen)
        function drawItems() {
            items.forEach(item => {
                if (!item.collected) {
                    ctx.fillStyle = ORANGE;
                    ctx.beginPath();
                    ctx.moveTo(item.x, item.y);
                    ctx.lineTo(item.x + item.size, item.y);
                    ctx.lineTo(item.x + item.size / 2, item.y - item.size);
                    ctx.closePath();
                    ctx.fill();
                }
            });
        }

        // Update spel
        function update() {
            if (gameOver) return;

            frameCount++;
            speed = 5 + score / 1000; // Verhoog snelheid over tijd

            // Speler fysica
            player.velocityY += player.gravity;
            player.y += player.velocityY;
            if (player.y + player.height >= groundY) {
                player.y = groundY - player.height;
                player.velocityY = 0;
                player.isJumping = false;
            }

            // Beweeg obstakels en items links
            obstacles.forEach(obs => obs.x -= speed);
            items.forEach(item => item.x -= speed);

            // Verwijder off-screen
            obstacles = obstacles.filter(obs => obs.x + obs.width > 0);
            items = items.filter(item => item.x + item.size > 0);

            // Spawn nieuwe
            if (frameCount % obstacleSpawnRate === 0) {
                generateObstacle();
                if (Math.random() > 0.5) generateItem();
                obstacleSpawnRate = Math.max(50, obstacleSpawnRate - 1); // Moeilijker over tijd
            }

            // Botsing detectie
            obstacles.forEach(obs => {
                if (player.x + player.width > obs.x && player.x < obs.x + obs.width &&
                    player.y + player.height > obs.y && player.y < obs.y + obs.height) {
                    if (obs.type === 'gap' && player.y + player.height > groundY) {
                        gameOver = true;
                    } else if (obs.type === 'chimney') {
                        gameOver = true;
                    }
                }
            });

            // Verzamel items
            items.forEach(item => {
                if (!item.collected && player.x + player.width > item.x && player.x < item.x + item.size &&
                    player.y + player.height > item.y && player.y < item.y + item.size) {
                    item.collected = true;
                    score += 50;
                    // Particle effect (eenvoudig: oranje vonken)
                    for (let i = 0; i < 5; i++) {
                        // Zou particles kunnen toevoegen, maar voor simplicity skip detailed particles
                    }
                }
            });

            // Score update
            score += 1;
            document.getElementById('score').innerText = 'Score: ' + score;
        }

        // Teken alles
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();
            drawGround();
            drawObstacles();
            drawItems();
            drawPlayer();
            ctx.shadowColor = 'transparent'; // Reset shadow
        }

        // Game loop
        function gameLoop() {
            update();
            draw();
            if (gameOver) {
                document.getElementById('final-score').innerText = score;
                if (score > highScore) highScore = score;
                document.getElementById('high-score').innerText = highScore;
                document.getElementById('game-over').style.display = 'block';
            }
            requestAnimationFrame(gameLoop);
        }

        // Event listeners
        window.addEventListener('keydown', e => {
            if (e.key === ' ' && !player.isJumping) {
                player.velocityY = player.jumpForce;
                player.isJumping = true;
            }
            if (e.key === ' ' && gameOver) resetGame();
        });

        // Touch voor mobiel (tik om te springen)
        canvas.addEventListener('touchstart', () => {
            if (!player.isJumping) {
                player.velocityY = player.jumpForce;
                player.isJumping = true;
            }
            if (gameOver) resetGame();
        });

        // Reset game
        function resetGame() {
            player.y = groundY - player.height;
            player.velocityY = 0;
            player.isJumping = false;
            obstacles = [];
            items = [];
            frameCount = 0;
            score = 0;
            speed = 5;
            obstacleSpawnRate = 100;
            gameOver = false;
            document.getElementById('game-over').style.display = 'none';
        }

        // Start game
        resetGame();
        gameLoop();
    </script>
</body>
</html>
